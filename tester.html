<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>í‹°ì˜¤ë” VAST ë™ì˜ìƒ ê²€ì¦ (1280x750)</title>
  <style>
    body { background: #222; color: white; font-family: sans-serif; text-align: center; }
    
    /* í‹°ì˜¤ë” í™”ë©´ í¬ê¸° ì‹œë®¬ë ˆì´ì…˜ */
    #mainContainer {
      position: relative;
      width: 1280px; 
      height: 750px; /* í‹°ì˜¤ë” ê´‘ê³  ì˜ì—­ */
      border: 5px solid #00ff00;
      margin: 20px auto;
      background: #000;
      box-shadow: 0 0 20px rgba(0,255,0,0.2);
    }
    
    #adContainer {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
    }
    
    #vastUrlInput {
      width: 60%; padding: 10px; font-size: 16px;
      border-radius: 5px; border: 1px solid #ccc; margin-right: 10px;
    }

    button {
      padding: 10px 20px; font-size: 16px; cursor: pointer;
      background: #00ff00; border: none; font-weight: bold; border-radius: 5px;
    }
  </style>
</head>
<body>
  <br>
  <h2>ğŸ“º í‹°ì˜¤ë” VAST ë™ì˜ìƒ ê²€ì¦ê¸°</h2>
  <p>ì•„ë˜ ì´ˆë¡ìƒ‰ ë°•ìŠ¤ ì•ˆì—ì„œ <b>ë™ì˜ìƒì´ ì¬ìƒë˜ë©´ ì„±ê³µ</b>ì…ë‹ˆë‹¤.</p>
  
  <!-- ë„ë©”ì¸ ë³€ê²½ëœ URL ê¸°ë³¸ ì…ë ¥ -->
  <input type="text" id="vastUrlInput" value="https://attractt-vast.livere.org/3SwYxPrHIjtMpYA/vast" placeholder="VAST XML URL">
  <button id="playButton">â–¶ ê´‘ê³  ë¡œë“œ & ì¬ìƒ</button>
  <br><br>

  <div id="mainContainer">
    <div id="adContainer"></div>
  </div>

  <script type="text/javascript" src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
  <script type="text/javascript">
    var adDisplayContainer;
    var adsLoader;
    var adsManager;

    function init() {
      // ì»¨í…Œì´ë„ˆ ì„¤ì •
      var adContainerElement = document.getElementById('adContainer');
      adDisplayContainer = new google.ima.AdDisplayContainer(adContainerElement);
      adDisplayContainer.initialize();

      // ë¡œë” ì„¤ì •
      adsLoader = new google.ima.AdsLoader(adDisplayContainer);
      
      // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      adsLoader.addEventListener(
          google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
          onAdsManagerLoaded, false);
      adsLoader.addEventListener(
          google.ima.AdErrorEvent.Type.AD_ERROR,
          onAdError, false);

      // VAST ìš”ì²­
      var adsRequest = new google.ima.AdsRequest();
      adsRequest.adTagUrl = document.getElementById('vastUrlInput').value;

      // í™”ë©´ í¬ê¸° ì§€ì • (Linear/Video ê´‘ê³ )
      adsRequest.linearAdSlotWidth = 1280;
      adsRequest.linearAdSlotHeight = 750;
      
      adsRequest.nonLinearAdSlotWidth = 1280;
      adsRequest.nonLinearAdSlotHeight = 750;

      adsLoader.requestAds(adsRequest);
    }

    function onAdsManagerLoaded(adsManagerLoadedEvent) {
      console.log("Ads Manager Loaded! (XML ë¡œë“œ ì„±ê³µ)");
      var adsRenderingSettings = new google.ima.AdsRenderingSettings();
      
      adsManager = adsManagerLoadedEvent.getAdsManager(
          document.getElementById('adContainer'), adsRenderingSettings); 

      adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, onAdError);
      
      // ê´‘ê³  ì‹œì‘ ì´ë²¤íŠ¸
      adsManager.addEventListener(google.ima.AdEvent.Type.STARTED, function() {
          console.log("Ad Started! (ì¬ìƒ ì‹œì‘)");
      });

      try {
        // 1280x750 í¬ê¸°ë¡œ ì´ˆê¸°í™” ë° ì¬ìƒ
        adsManager.init(1280, 750, google.ima.ViewMode.NORMAL);
        adsManager.start();
      } catch (adError) {
        console.log("Ads Manager Init Error:", adError);
      }
    }

    function onAdError(adErrorEvent) {
      console.log("Ad Error:", adErrorEvent.getError());
      alert("âŒ ì—ëŸ¬ ë°œìƒ: " + adErrorEvent.getError());
    }

    document.getElementById('playButton').addEventListener('click', init);
  </script>
</body>
</html>
